<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Your Information</title>

	<link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">

	<!-- Bootstrap core CSS -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
		  integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/bbbootstrap/libraries@main/choices.min.css">
<script src="https://cdn.jsdelivr.net/gh/bbbootstrap/libraries@main/choices.min.js"></script>

	<link type="text/css" href="/static/page_style.css" rel="stylesheet">
	<script type="text/javascript" src="/static/lead_info_by_lead_state.js"></script>

	<!-- Custom styles for this template -->
	<style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }

	.choices__inner, .choices__list, .choices__input, .choices__list--multiple {
    background: white !important;
	}

	</style>

	<script type="text/javascript">
		 function finalCheckBeforeSubmit(pressed_button_id)
    {
    var lead_name =  $('input[name="lead_name"]').val();
    var lead_email =  $('input[name="lead_email"]').val();
    var lead_phone_number =  $('input[name="lead_phone_number"]').val();
    var pressed_button_val = document.getElementById(event.srcElement.id).value
    document.getElementById("action").value = pressed_button_val

		var lead_id = $("#lead").attr("data-lead_id");
	$('input[name="lead_id"]').val(lead_id);



	if (pressed_button_val == "Update")
	{
	if (lead_name == "" && lead_email == "" && lead_phone_number == "")
	{
		document.getElementById("name-email-phone_number-checker").hidden=false;
		event.preventDefault();
	}
	else
	{
	document.getElementById("lead_info_form").submit();
	}
	}
    }
	</script>
</head>


<body class="bg-light">
<div class="container">
	<div class="py-5 text-center">
		<img class="d-block mx-auto my-4" src="/static/logo.png" alt="" width="528" height="201">
	</div>

	<div class="">
		<div class="">
			<form id="lead_info_form" class="needs-validation" action="{{ url_for('lead_info_by_lead') }}" method="post" data-toggle="validator" >


				<h4 class="mb-3 text-center font-weight-light font-italic"><u>Update Your Information</u></h4>
				<div class="col-md-8 order-md-1">

				<div class="row no-padding">
					<h4 class="mb-3"><u>Parent/Guardian Bio</u></h4>
				</div>

				<div class="row no-padding">
						<div class="mb-3">
							<label for="lead_salutation">Salutation</label>
						<select  id="lead_salutation" name="lead_salutation" class="form-control">
								<option value="" selected disabled hidden></option>
								<option value='Mr.'>Mr.</option>
								<option value='Ms.'>Ms.</option>
							</select>
						<div class="invalid-feedback">Valid  salutation is required.</div>
						</div>
					</div>

				{# TODO When salutation present, use it to send email; when absent, default to 'Dear Sir/Maam', which will apply to leads that are both parents and students #}

					<div class="row no-padding">
						<div class=" mb-3">
							<label for="lead_name">Full Name</label>
							<input type="text" class="form-control" id="lead_name" name="lead_name" placeholder="" value="">
							<div class="invalid-feedback">
								Valid  name is required.
							</div>
						</div>
					</div>

					<div class="row no-padding">
						<div class=" mb-3">
						<label for="lead_email">Email</label>
						<input type="email" class="form-control" id="lead_email" name="lead_email" placeholder="you@example.com">
						<div class="invalid-feedback">
							Please enter a valid email address.
						</div>
					</div>
					</div>

					<div class="row no-padding">
						<div class=" mb-3">
						<label for="lead_phone_number">Phone number</label>
						<input type="tel" class="form-control" id="lead_phone_number" name="lead_phone_number"
							   placeholder="111-111-1111">
						<div class="invalid-feedback">
							Please enter a valid phone number.
						</div>
					</div>
						</div><br>

					<div id="name-email-phone_number-checker" class="text-danger" hidden>Please enter a name, email, or phone number</div>

					<br><br>

					<div class="row no-padding">
						<h4 class="mb-3" ><u>Details</u></h4>
					</div>
						<br>


<!--					find detials of hos this works here: https://bbbootstrap.com/snippets/multiselect-dropdown-list-83601849-->
					<div class="row no-padding" >
    <div class="col-md-7" style="padding-left: 0px !important; padding-left: 0px !important;padding-right: 0px !important;">
		<label for="what_services_are_you_interested_in">What service are you interested in? (You can choose more than one)</label>
		<select id="what_services_are_you_interested_in" name="what_services_are_you_interested_in" class="form-control" placeholder="" multiple >
<!--            <option value="" selected disabled hidden></option>-->
								<option value='PSAT'>PSAT</option>
								<option value='SAT/ACT'>SAT/ACT</option>
								<option value='College Admissions Counselling'>College Admissions Counselling</option>
								<option value='College Application Essays'>College Application Essays</option>
								<option value='General Tutoring'>General Tutoring</option>
								<option value='Other'>Other</option>
        </select> </div>
</div><br><br><br>

						<div class="row no-padding" >
							<div class="row  col-md-7 " >
							<label for="details_on_what_service_you_are_interested_in">Details on what service you are interested in</label>
							<textarea  id="details_on_what_service_you_are_interested_in"  name="details_on_what_service_you_are_interested_in" class="form-control" rows="2" placeholder=""></textarea>
						</div></div><br><br><br>

					<div class="row no-padding" >
							<div class="row  col-md-6 " >
							<label for="grade_level">Grade Level</label>
							<select  id="grade_level"  name="grade_level" class="form-control">
								<option value="" selected disabled hidden></option>
								<option value='Middle School'>Middle School</option>
								<option value='9th Grade'>9th Grade</option>
								<option value='10th Grade'>10th Grade</option>
								<option value='11th Grade'>11th Grade</option>
								<option value='12th Grade'>12th Grade</option>
								<option value='Other'>Other</option>
							</select>
						</div></div><br><br>

					<div class="row no-padding">
						<div class=" mb-3">
							<label for="recent_test_score">SAT/ACT/P-SAT/P-ACT Score (if taken within the last 1 year)</label>
							<input type="number" class="form-control" id="recent_test_score" name="recent_test_score" placeholder="" value="">
							<div class="invalid-feedback">
								Valid  number is required.
							</div>
						</div>
					</div><br><br>


						<div class="row no-padding" >
							<div class="row  col-md-8 " >
							<label for="miscellaneous_notes">Miscellaneous Notes (e.g. anything else we need to know)</label>
							<textarea  id="miscellaneous_notes"  name="miscellaneous_notes" class="form-control" rows="5"  placeholder=""></textarea>
						</div></div><br><br><br>

						<div class="row no-padding" >
							<div class="row  col-md-6 " >
							<label for="how_did_you_hear_about_us">How did you hear about us?</label>
							<select  id="how_did_you_hear_about_us"  name="how_did_you_hear_about_us" class="form-control">
								<option value="" selected disabled hidden></option>
								<option value='Southwest: Garland'>Southwest: Garland</option>
								<option value='Southwest: Arlington'>Southwest: Arlington</option>
								<option value='Returning Client'>Returning Family</option>
								<option value='USPS Mailer'>USPS Mailer</option>
								<option value='Gidi Lounge'>Gidi Lounge</option>
								<option value='Referral'>Referral</option>
								<option value='Other'>Other</option>
							</select>
						</div></div><br><br>

						<div class="row no-padding" >
							<div class="row  col-md-6 " >
							<label for="details_on_how_you_heard_about_us">Details on how you heard about us</label>
							<textarea  id="details_on_how_you_heard_about_us"  name="details_on_how_you_heard_about_us" class="form-control" rows="2"  placeholder="" ></textarea>
						</div></div><br><br><br>

					<div>
							{% for message in get_flashed_messages() %}
							<div class="alert alert-warning col-md-6 mb-6">
								<button type="button" class="close" data-dismiss="alert">&times;</button>
								{{ message }}
							</div>
							{% endfor %}
						</div>

					<br><br>
					<div class="row text-center">
						<div class="col-md-6 mb-3">
							<input id="update_lead_info" name="submitButton" class="btn btn-primary btn- btn-block" type="submit"   style="display:inline-block; width:50%; margin-left: 25%;"  value="Update" onclick="finalCheckBeforeSubmit()"></input>
						</div>

						<input id="lead" name="lead" hidden
							   data-lead_id="{{ lead_id }}"
							   data-lead_salutation="{{ lead_salutation }}"
							   data-lead_name="{{ lead_name }}"
							   data-lead_email="{{ lead_email }}"
							   data-lead_phone_number="{{ lead_phone_number }}"
							   data-grade_level="{{ grade_level }}"
							   data-recent_test_score="{{ recent_test_score }}"
							   data-what_services_are_you_interested_in="{{ what_services_are_you_interested_in }}"
							   data-details_on_what_service_you_are_interested_in="{{ details_on_what_service_you_are_interested_in }}"
							   data-miscellaneous_notes="{{ miscellaneous_notes }}"
							   data-how_did_you_hear_about_us="{{ how_did_you_hear_about_us }}"
							   data-details_on_how_you_heard_about_us="{{ details_on_how_you_heard_about_us }}"
						>

						<input id="lead_id" name="lead_id" hidden>


						<input id="action" name="action" hidden>
					</div></div>
			</form>
		</div>
	</div>

	<hr>

	<footer class="my-5 pt-5 text-muted text-center text-small">
		<p class="mb-1">&copy; 2017-2021 Perfect Score Mo</p>
		<ul class="list-inline">
			<li class="list-inline-item"><a href="#">Privacy</a></li>
			<li class="list-inline-item"><a href="#">Terms</a></li>
			<li class="list-inline-item"><a href="#">Support</a></li>
		</ul>
	</footer>
</div>

</body>
</html>
