<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Invoice Page</title>

	<!-- Bootstrap core CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
	<link href="static/page_style.css" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

	<!-- Custom styles for this template -->
	<style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }

	</style>


		<script>


		 function turnOffRequired()
    {
    {% if not client_info.turn_on_installments %}
      $('input[name="installment-payment"]').prop('required', false);
        $('input[name="full-payment"]').prop('required', false);
        {% endif %}

    }

	</script>

</head>


<body class="bg-light">
<div class="container">
	<div class="py-5 text-center">
		<img class="d-block mx-auto mb-4" src="/static/logo.png" alt="" width="200" height="150">
		<h2>Your Invoice</h2>
		<p class="lead">_________________________</p>
	</div>

	<div class="row">
		<div class="col-md-8 order-md-1">
			<br><br>
			<h4 class="mb-3">Client Information</h4>

			<form id="invoice" class="needs-validation" data-toggle="validator" action="{{ url_for('checkout') }}" method="post">
				<div class="row">
					<div class="col-md-6 mb-3">
						<label for="first_name" class="font-weight-bold">First name</label>
						<p class="mb-1" id="first_name">{{client_info.first_name}}</p>
					</div>
					<div class="col-md-6 mb-3">
						<label for="last_name" class="font-weight-bold">Last name</label>
						<p class="mb-1" id="last_name">{{client_info.last_name}}</p>
					</div>
				</div>

				<div class="mb-3">
					<label for="email" class="font-weight-bold">Email</label>
						<p class="mb-1" id="email">{{client_info.email}}</p>
				</div>

				<div class="mb-3">
					<label for="phone_number" class="font-weight-bold">Phone number</label>
						<p class="mb-1" id="phone_number">{{client_info.phone_number}}</p>
				</div>

        <br>




				<h4 class="mb-3">Product Information</h4>

				<table class="table">
  <thead class="thead-dark">
    <tr>
      <th scope="col">#</th>
      <th scope="col">Description</th>
      <th scope="col"># of Units</th>
      <th scope="col">Per Product Cost</th>
		<th scope="col">Total Cost</th>
    </tr>
  </thead>
  <tbody>

  {% set count = namespace(value=0) %}

  {% for product in products_info %}
  {% set count.value = count.value + 1 %}
    <tr>
      <th scope="row">{{ count.value }}</th>
      <td>{{product.product_description}}</td>
      <td>{{product.number_of_product_units}}</td>
      <td>{{product.per_product_cost}}</td>
		<td>{{product.total_product_cost}}</td>
    </tr>
    {% endfor %}

   {% if client_info.adjust_total %}
  <tr>
	  {% set count.value = count.value + 1 %}
      <th scope="row">{{ count.value }}</th>
	  <td>{{client_info.adjustment_explanation}}</td>
      <td>1</td>
      <td>{{client_info.adjust_total}}</td>
		<td>{{client_info.adjust_total}}</td>
    </tr>

  {% endif %}

  <tr>

  </tr>

  <tr>
      <th scope="row"></th>
	  <td>Invoice Total</td>
      <td></td>
      <td></td>
		<td>{{client_info.invoice_total}}</td>
    </tr>

  </tbody>
</table>


				<br>

				{% if client_info.payment_started %}
				<div><span class="badge badge-danger">You previously started a payment for this invoice code. Contact Mo for a different invoice code.</span></div>
				{% else %}



					<div class="row">

						{% if client_info.turn_on_installments %}

							<div class="col-sm">

								<div class="custom-control custom-radio">
									<input id="full-payment-options" name="payment-options" type="radio" value="full-payment-options"
										   class="custom-control-input" required>
									<label class="custom-control-label" for="full-payment-options">Pay in full</label>
								</div>

							</div>



 			<div class="col-sm">

								<div class="custom-control custom-radio">
									<input id="installment-payment-options" name="payment-options" type="radio" value="installment-payment-options"
										   class="custom-control-input" required>
									<label class="custom-control-label" for="installment-payment-options">Pay in installments</label>
								</div>

							</div>


						{% else %}

							<div class="col-sm">

								<div class="custom-control custom-radio">
									<input id="no-installment-credit-card" value="no-installment-credit-card" name="payment-options" type="radio"
										   class="custom-control-input"
										   required>
									<label class="custom-control-label" for="no-installment-credit-card">Credit/Debit (Regular Card Fees, 1-3%)</label>
								</div>

							</div>

							<div class="col-sm">

								<div class="custom-control custom-radio">
									<input id="no-installment-ach" value="no-installment-ach" name="payment-options" type="radio"
										   class="custom-control-input"
										   required>
									<label class="custom-control-label" for="no-installment-ach">ACH (Free)</label>
								</div>

							</div>

{% endif %}


						</div>

				<br>


				<div id="holding-div"></div>


				<div id="installment-payment-div" class="d-block my-3" >
					<div container>

						<h4 class="mb-3">Options</h4>

						  {% if client_info.turn_on_installments %}

				<table class="table">
  <thead class="thead-dark">
    <tr>
      <th scope="col">#</th>
      <th scope="col">Date</th>
      <th scope="col">Installment</th>
    </tr>
  </thead>
  <tbody>



   <tr>
      <th scope="row">1</th>
      <td>Today</td>
      <td>{{client_info.deposit}}</td>
    </tr>

  {% set count = namespace(value=1) %}

  {% for installment in client_info.installments %}
  {% set count.value = count.value + 1 %}
    <tr>
      <th scope="row">{{ count.value }}</th>
      <td>{{installment.installment_date}}</td>
      <td>{{installment.installment_amount}}</td>
    </tr>
    {% endfor %}


  </tbody>
</table>

						<div class="container">

      <div class="col-sm">
<span class="badge badge-danger">Debit cards are not accepted for installments. Only credit cards are accepted for installments. </span>

    </div>
							<br>
							      <div class="col-sm">
<span class="badge badge-danger"> Installments are withdrawn automatically.</span>

    </div>

  </div>
						<br>


						{% endif %}


						<div container>

<div class="row">

							<div class="col-sm">

								<div class="custom-control custom-radio">
									<input id="installment-payment-credit-card" value="installment-payment-credit-card" name="installment-payment" type="radio"
										   class="custom-control-input"
										   required>
									<label class="custom-control-label" for="installment-payment-credit-card">Credit/Debit (Regular Card Fees, 1-3%)</label>
								</div>

							</div>

				</div>

		</div>






		</div>





	</div>



						<div id="full-payment-div" class="d-block my-3" >
					<div container>

						<h4 class="mb-3">Options</h4>

<div class="row">

							<div class="col-sm">

								<div class="custom-control custom-radio">
									<input id="full-payment-credit-card" value="full-payment-credit-card" name="full-payment" type="radio"
										   class="custom-control-input"
										   required>
									<label class="custom-control-label" for="full-payment-credit-card">Credit/Debit (Regular Card Fees, 1-3%)</label>
								</div>

							</div>

							<div class="col-sm">

								<div class="custom-control custom-radio">
									<input id="full-payment-ach" value="full-payment-ach" name="full-payment" type="radio"
										   class="custom-control-input"
										   required>
									<label class="custom-control-label" for="full-payment-ach">ACH (Free)</label>
								</div>

							</div>

				</div>

		</div>


	</div>

				<input id="stripe_info" type="hidden"  data-stripe_info="{{ stripe_info }}">
<!--				<script>$(document).ready(function() {alert({{stripe_info.phone_number}});});</script>-->
<!--				<script>alert(a);</script>-->
<!--				<input id="client_info" type="hidden"  data-client_info="{{ client_info }}">-->



				<input class="btn btn-primary btn-lg btn-block" type="submit" value="Proceed to Payment" onclick="turnOffRequired();">
{% endif %}





</form>

	<footer class="my-5 pt-5 text-muted text-center text-small">
		<p class="mb-1">&copy; 2017-2021 Perfect Score Mo</p>
		<ul class="list-inline">
			<li class="list-inline-item"><a href="#">Privacy</a></li>
			<li class="list-inline-item"><a href="#">Terms</a></li>
			<li class="list-inline-item"><a href="#">Support</a></li>
		</ul>
	</footer>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="/docs/4.3/assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
<script src="/docs/4.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o"
		crossorigin="anonymous"></script>
			<script type="text/javascript" src="static/invoice_page_state.js"></script>
	</div>
	</div>
</body>
</html>
